2018.07.16 
掷色子游戏在区块链上的实现
掷色子游戏的游戏规则很简单，参与方掷出最大面的色子时即为获胜。下面考虑该游戏在以太坊区块链上的实现：

游戏要求
1，支持人机对战
2，支持多人对战
3，web前端提供滑动块（进度条），用以产生随机数，色子面根据该随机数生成，并提供色子变化的简单动画
4，在一次对战中，所有参与方只有一次投掷机会，投掷点数最大的为获胜者，当某些参与方中途离开现场，超过一定时间后，剩余参与者按照相同的规则确
定获胜方，如果所有参与方开始了比赛却都不投掷，一定时间后，合约没收全部比赛用代币作为惩罚；每次对战需要消耗一定的代币，代币的固定一部分由
庄家（智能合约收取），是为台费；剩下的代币作为获胜方的奖励，由获胜方均分（多人对战时，存在多个获胜方的可能）。
5，台费必须收取，因为智能合约的执行需要消耗GAS，且需要防止过多的游戏占用网络资源，造成网络阻塞；台费只能由合约创建者设置和修改。
6，仅合约创建者可以提取台费
7，随机数的生成使用一个单独的合约，可以通过升级该随机数合约来升级色子主合约
8，允许在一次对战中最大点数相同者可以有多次投掷机会，直到决出唯一获胜者---这是以后升级考虑的一个方向
9，游戏由用户A创建，创建者A可以加入合约作为对战方（人机对战）或等待有参与者加入游戏后指示合约开始游戏，当所有参与方投掷结束，或超过一定时间后，合约强
制对战结束，并根据上面的方法对战结果做代币分配。
10，虽然极力避免智能合约中可能出现的各种BUG,仍能会存在未考虑到的地方，这时如何保护智能合约，免除、较少损失？设置一个合约级的变量，当发生
异常时，禁止从合约账户转出余额（转到创建者账户除外）。---就是留个后门。
11，不允许一个用户同时创建多个游戏（含两个)

问题：人机对战中，假设A有无限的代币，每次A输掉对战，就以对战输掉翻(>1)倍的赌金继续比赛，直至获胜，然后结束今天的对战，明天/后天...都是如此，A是不是永
远不会输？如何防止这个问题：对每次赌金的上限做限制？对同一个账户每天人机对战的次数做限制？

在某个时间内，只允许进行单个游戏？如果这样的话，游戏的参与性就太差，不利于合约创收，多个人在不同游戏组同时游戏是必须支持的功能。另外不同
的人有不同的风险偏好，愿意付出不同赌金的人如果被安排在同一次游戏内，显然对赌金高的人不公平。综上，游戏应该允许按赌金分组同时进行。
应该允许发费不同赌金的人在不同游戏组里同时游戏。


issues
issue1: 智能合约如何实现周期性的动作？
issue2: 多人对战，如果有多人点数相同，他们要不要继续玩下去？目前从实现简单考虑，暂不支持继续玩下去，也就是一把定输赢！
issue3：delete对映射无效，那怎么删除映射呢？
issue4: 智能合约里使用定时器目前好像Solidity还不支持（不同的P2P节点开始定时的时刻可能存在差异，无法做到同步），所以
        游戏目前暂不考虑游戏时长的问题：对于游戏参与者长时间不开始的问题，游戏创建者可以在游戏开始一段时间后（>10分钟），如果游戏还没有决
        出获胜者，可以强制结束游戏，进行赌金分割。
issue5：产生随机数的oraclize库import失败，随机数生成器先自定义一个。